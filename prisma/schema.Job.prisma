
// --- Async Architecture ---

model Job {
  id        String   @id @default(cuid())
  type      String   // e.g., 'SYNC_DRIVE_FOLDER', 'GENERATE_FEED'
  payload   String   // JSON string of arguments
  
  status    String   @default("PENDING") // PENDING, PROCESSING, COMPLETED, FAILED
  result    String?  // JSON string of result
  error     String?  // Error message if failed
  
  retries   Int      @default(0)
  maxRetries Int     @default(3)
  
  runAt     DateTime @default(now()) // Scheduled time
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  // Optional: Link to entities if helpful for debugging
  vehicleVin String?
  vehicle    Vehicle? @relation(fields: [vehicleVin], references: [vin], onDelete: SetNull)
}
